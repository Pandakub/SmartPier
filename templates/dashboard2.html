<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color:rgb(255, 255, 255);
            margin: 0;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            font-size: 20px; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
            font-weight: bold; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) */
        }
        
        .main-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .station-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .route-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .route-card {
            flex: 1;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .route-header {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2196F3;
            margin-bottom: 10px;
        }

        .route-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #666;
            font-size: 14px;
        }

        .price-button {
            display: flex;
            margin-top: 10px;
            overflow: hidden;
            border-radius: 8px;
        }

        .price-left {
            background: #E5A43B;
            color: white;
            padding: 12px;
            flex: 2;
            display: flex;
            align-items: center;
        }

        .price-right {
            background: #2196F3;
            color: white;
            padding: 12px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .no-data {
            color: #666;
            text-align: center;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠</h1>
    </div>
    <div class="main-card">
        <div class="station-info">
            <div>
                <div class="station-name">N24 ‡∏ó‡πà‡∏≤‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°1‡πÄ‡∏à‡πá‡∏î</div>
                <div class="time">‡πÄ‡∏ß‡∏•‡∏≤ {{ current_time }} ‡∏ô‡∏≤‡∏ó‡∏µ</div>
            </div>
            <img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="logo" style="width: 40px; height: 40px;">
        </div>

        <div class="route-container">
            <!-- Route ‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ, ‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î -->
            <div class="route-card">
                <div class="route-header">
                    <span>‚¨ÖÔ∏è</span>
                    <span>‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ, ‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î</span>
                </div>
                <div class="route-content">
                    <span>Route</span>
                    <span>Next Boat</span>
                </div>
                {% if data.direction == 1 and data.distance <= 5000 %}
                    <div class="price-button">
                        <div class="price-left">
                            ‡∏ò‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô
                            <br>
                            ‚¨ÖÔ∏è ‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ, ‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î
                        </div>
                        <div class="price-right">
                            {{ data.time }} ‡∏ô‡∏≤‡∏ó‡∏µ
                        </div>
                    </div>
                {% else %}
                    <div class="no-data">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                {% endif %}
            </div>
            
            <!-- Route ‡∏™‡∏≤‡∏ó‡∏£, ‡∏ß‡∏±‡∏î‡∏£‡∏≤‡∏ä‡∏™‡∏¥‡∏á‡∏Ç‡∏£ -->
            <div class="route-card">
                <div class="route-header">
                    <span>‚û°Ô∏è</span>
                    <span>‡∏™‡∏≤‡∏ó‡∏£, ‡∏ß‡∏±‡∏î‡∏£‡∏≤‡∏ä‡∏™‡∏¥‡∏á‡∏Ç‡∏£</span>
                </div>
                <div class="route-content">
                    <span>Route</span>
                    <span>Next Boat</span>
                </div>
                {% if data.direction == 2 and data.distance <= 5000 %}
                    <div class="price-button">
                        <div class="price-left">
                            ‡∏ò‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô
                            <br>
                            ‚û°Ô∏è ‡∏™‡∏≤‡∏ó‡∏£, ‡∏ß‡∏±‡∏î‡∏£‡∏≤‡∏ä‡∏™‡∏¥‡∏á‡∏Ç‡∏£
                        </div>
                        <div class="price-right">
                            {{ data.time }} ‡∏ô‡∏≤‡∏ó‡∏µ
                        </div>
                    </div>
                {% else %}
                    <div class="no-data">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                {% endif %}
            </div>
        </div>
    </div>
        <!-- üî• ‡πÄ‡∏û‡∏¥‡πà‡∏° JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ -->
    <script>
        async function fetchData() {
            try {
                // üìå ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API
                let response = await fetch('/api/get_boat_data');
                let data = await response.json();
                console.log(data);

                // üìå ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤
                document.getElementById("current-time").innerText = `‡πÄ‡∏ß‡∏•‡∏≤ ${data.current_time} ‡∏ô‡∏≤‡∏ó‡∏µ`;

                // üìå ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ, ‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î
                if (data.direction === 1 && data.distance <= 5000) {
                    document.getElementById("route1").innerHTML = `
                        <div class="price-button">
                            <div class="price-left">
                                ‡∏ò‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô
                                <br> ‚¨ÖÔ∏è ‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ, ‡∏õ‡∏≤‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏î
                            </div>
                            <div class="price-right">
                                ${data.time} ‡∏ô‡∏≤‡∏ó‡∏µ
                            </div>
                        </div>`;
                } else {
                    document.getElementById("route1").innerHTML = `<div class="no-data">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>`;
                }

                // üìå ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‡∏™‡∏≤‡∏ó‡∏£, ‡∏ß‡∏±‡∏î‡∏£‡∏≤‡∏ä‡∏™‡∏¥‡∏á‡∏Ç‡∏£
                if (data.direction === 2 && data.distance <= 5000) {
                    document.getElementById("route2").innerHTML = `
                        <div class="price-button">
                            <div class="price-left">
                                ‡∏ò‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô
                                <br> ‚û°Ô∏è ‡∏™‡∏≤‡∏ó‡∏£, ‡∏ß‡∏±‡∏î‡∏£‡∏≤‡∏ä‡∏™‡∏¥‡∏á‡∏Ç‡∏£
                            </div>
                            <div class="price-right">
                                ${data.time} ‡∏ô‡∏≤‡∏ó‡∏µ
                            </div>
                        </div>`;
                } else {
                    document.getElementById("route2").innerHTML = `<div class="no-data">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>`;
                }

            } catch (error) {
                console.error("‚ùå Error fetching data:", error);
            }
        }

        // üìå ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        fetchData();
        setInterval(fetchData, 10000);
    </script>
</body>
</html>
